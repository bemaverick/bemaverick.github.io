(this["webpackJsonpfirebase-chat-react"]=this["webpackJsonpfirebase-chat-react"]||[]).push([[0],{21:function(e,t,a){e.exports=a(40)},26:function(e,t,a){},28:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),o=a(12),r=a.n(o),c=(a(26),a(9)),i=a.n(c),l=a(13),u=a(14),m=a(15),d=a(19),h=a(16),g=a(20),p=(a(28),a(17)),b=a.n(p),f=a(7),w=a(5),I=(a(39),{apiKey:"AIzaSyAsIHuK7Ch5nIKJ_FvSO1wDx9duVVmD-Ak",authDomain:"competitionchat.firebaseapp.com",databaseURL:"https://competitionchat.firebaseio.com",projectId:"competitionchat",storageBucket:"competitionchat.appspot.com",messagingSenderId:"750085230345",appId:"1:750085230345:web:7b37022d91cb776e268dd8"}),v=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={userName:sessionStorage.getItem("userName")||"",uid:sessionStorage.getItem("uid"),messageIsFetched:!1,sessionId:localStorage.getItem("sessionId")||"".concat(Date.now(),"_").concat(Math.random())},a.handleNewUserMessage=function(e){a.state.userName?a.sendMessageToServer(e):a.setUserName(e)},a.setUserName=function(e){var t="".concat(e,"_").concat(Math.random(),"_").concat(Date.now());a.setState({userName:e,uid:t}),sessionStorage.setItem("userName",e),sessionStorage.setItem("uid",t)},a.sendMessageToServer=function(e){var t=a.state,n=t.userName,s=t.uid;a.store.add({uid:s,userName:n,text:e,timestamp:Date.now()})},b.a.initializeApp(I),a.store=f.firestore().collection("messages"),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.auth().signInAnonymously();case 2:localStorage.getItem("sessionId")||(localStorage.setItem("sessionId",this.state.sessionId),f.firestore().collection("session").add({sessionId:this.state.sessionId})),this.store.orderBy("timestamp","asc").onSnapshot((function(e){e.docChanges().forEach((function(e){var a=e.doc.data();a&&a.uid===t.state.uid&&!t.state.messageIsFetched&&Object(w.addUserMessage)(a.text),a&&a.uid!==t.state.uid&&Object(w.addResponseMessage)("(".concat(a.userName,"):  ").concat(a.text))})),t.setState({messageIsFetched:!0})}),(function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.userName;return s.a.createElement("div",{className:"container"},s.a.createElement(w.Widget,{subtitle:"Competition chat",senderPlaceHolder:e?"".concat(e,": Type a message..."):"Your Name",handleNewUserMessage:this.handleNewUserMessage}),s.a.createElement("div",{className:"header"},s.a.createElement("a",{href:"https://t.me/ArmwrestlingGroup",target:"_blank"},"Telegram channel "),s.a.createElement("a",{href:"https://www.youtube.com/channel/UCONba2gMK9iHfvJ2cCKstDw",target:"_blank"},"YT channel"),s.a.createElement("button",{onClick:w.toggleWidget,target:"_blank"},"Online chat"),s.a.createElement("a",{href:"http://www.waf-armwrestling.com/event/worlds2019/",target:"_blank"},"S\u0421HEDULE"),s.a.createElement("a",null,"Mail: sergomen153@gmail.com")),s.a.createElement("div",{className:"row"},s.a.createElement(E,{youtubeId:"fKMO7fLrCm0"}),s.a.createElement(E,{youtubeId:"FXvF3ebzYBY"}),s.a.createElement(E,{youtubeId:"-DlQf63joUM"}),s.a.createElement(E,{youtubeId:"PAc00InrFuY"})),s.a.createElement("div",{className:"row"},s.a.createElement(E,{youtubeId:"YhHWw6AAEi0"}),s.a.createElement(E,{youtubeId:"Qoc4WfYoKXM"}),s.a.createElement(E,{youtubeId:"AKvViDkVC-8"}),s.a.createElement(E,{youtubeId:"pBgLPC9g9hs"})))}}]),t}(s.a.Component),E=function(e){var t,a=e.youtubeId;return s.a.createElement("div",{className:"block"},s.a.createElement("div",null,s.a.createElement("iframe",{src:(t=a,"https://www.youtube.com/embed/".concat(t,"?autoplay=1&allow=autoplay")),frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0})))},y=v;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.77282038.chunk.js.map